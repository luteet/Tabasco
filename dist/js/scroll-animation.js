export default function scrollAnimation(e={}){let t,o,r,s,i=0,c=!!e.lenis&&e.lenis;const a=document.querySelector(".footer"),l=document.querySelector(".main-background"),n=l.querySelector(".main-background__logo"),d=l.querySelectorAll(".main-background__logo span"),g=document.querySelector(".main-background__line"),u=document.querySelector(".services"),p=(document.querySelectorAll(".services__col"),document.querySelectorAll(".services__nav a")),m=document.querySelectorAll(".services__blocks_elements div"),y=document.querySelectorAll(".services__block"),h=document.querySelector(".news"),v=document.querySelector(".about-us__text");function b(e=!1){if(i!=window.innerWidth){let e=window.innerWidth>=992?document.querySelector(".simplebar-content-wrapper"):document.querySelector("body");ScrollTrigger.killAll(),i=window.innerWidth,t&&t.kill(),t=gsap.timeline({scrollTrigger:{trigger:".wrapper",start:"top top",end:`+=${window.innerHeight}px top`,scrub:!0,scroller:e,onUpdate:e=>{}}}),ScrollTrigger.create({trigger:".wrapper",start:"top top",scroller:e,onEnter:()=>{g.classList.remove("is-visible")},onLeaveBack:()=>{g.classList.add("is-visible")}}),t.pause(),gsap.set(n,{"--x":"0.435ch"}),t.to(n,{"--logo-opacity":.09,"--gradient-opacity":0,onStart:()=>{a.classList.add("is-visible")}}),t.to(n,{scale:window.innerWidth>550?"3":"8",bottom:window.innerHeight/2-n.offsetHeight/2+"px","--x":"0ch",duration:2}),o&&o.kill(),o=gsap.timeline({scrollTrigger:{trigger:".wrapper",start:`+=${window.innerHeight}px top`,end:"+="+(u.offsetHeight+4*window.innerHeight),scroller:e,scrub:!0}}),o.to(n,{translateX:window.innerWidth>550?"-20.8ch":"-62.85ch",duration:2}),r&&r.kill(),r=gsap.timeline({scrollTrigger:{trigger:".wrapper",start:`+=${u.offsetHeight+4*window.innerHeight+h.offsetHeight} top`,end:"+="+window.innerHeight,scrub:!0,scroller:e,onEnter:()=>{n.classList.add("background-mode-2"),gsap.set(n.querySelector("svg"),{opacity:1,color:"#171717"}),gsap.set(n,{"--opacity":0,"--logo-opacity":0,"--last-opacity":1}),gsap.set(d[3],{display:"block"})},onLeaveBack:()=>{n.classList.remove("background-mode-2"),gsap.set(n.querySelector("svg"),{opacity:0}),gsap.set(n,{"--shadow-opacity":0,"--logo-opacity":.09,"--last-opacity":0}),gsap.set(d[3],{display:"none"})}}}),r.pause(),r.to(n.querySelector("svg"),{duration:1,color:"#DF4D44"}),r.to(n,{duration:1,"--shadow-opacity":1},"-=1"),r.to(n,{duration:1,delay:1,"--shadow-opacity":0}),r.to(n,{duration:1,"--logo-opacity":0,"--last-opacity":0},"-=1"),r.to(n,{scale:1,left:0,translateX:"-3.25ch",bottom:window.innerHeight/2-n.offsetHeight/2+"px",duration:2},"-=0.5"),s&&s.kill(),s=gsap.timeline({scrollTrigger:{trigger:document.querySelector(".about-us__text"),start:"top top",end:`+${document.querySelector(".about-us__text").offsetHeight} top`,scrub:!0,pin:!0,pinType:"fixed",scroller:e}}),gsap.set(v.querySelectorAll(".word"),{"--color":"#FFF"}),s.to(v.querySelectorAll(".word"),{"--color":"#DF4D44",stagger:1}),ScrollTrigger.create({trigger:".services",start:"top center",onEnter:()=>{u.classList.add("is-active"),y[0].classList.add("is-visible")},onLeaveBack:()=>{u.classList.remove("is-active"),y[0].classList.remove("is-visible"),y[0].classList.remove("is-hidden")},scroller:e}),window.innerWidth>=992?(ScrollTrigger.create({trigger:".services__hero",start:"top top",end:`+=${document.querySelector(".services__blocks_elements").offsetHeight} top`,pin:!0,pinType:"fixed",pinSpacing:!1,scroller:e}),ScrollTrigger.create({trigger:".services__blocks_wrapper",start:"top top",end:`+=${document.querySelector(".services__blocks_elements").offsetHeight} top`,pin:!0,pinType:"fixed",scroller:e}),m.forEach((t,o)=>{ScrollTrigger.create({trigger:t,start:"top top",scroller:e,onEnter:()=>{document.body.style.background=t.dataset.theme,y[o].classList.add("is-visible"),y[o].classList.remove("is-hidden"),p.forEach(e=>e.classList.remove("is-active")),p[o].classList.add("is-active"),0!=o&&y[o-1].classList.add("is-hidden")},onEnterBack:()=>{document.body.style.background=t.dataset.theme,y.forEach((e,t)=>{t>o&&e.classList.add("is-hidden")}),y[o].classList.remove("is-hidden"),o!=m.length-1&&y[o+1].classList.remove("is-visible"),p.forEach(e=>e.classList.remove("is-active")),p[o].classList.add("is-active")},onLeaveBack:()=>{0==o&&(document.body.style.background=t.dataset.defaultTheme)},onLeave:()=>{o==y.length-1&&(document.body.style.background=t.dataset.defaultTheme)}})}),y.forEach((e,t)=>{e.classList.remove("is-hidden"),e.classList.remove("is-visible")})):y.forEach((t,o)=>{ScrollTrigger.create({trigger:t,start:"top center",end:"bottom center",scroller:e,onEnter:()=>{document.body.style.background=m[o].dataset.theme},onEnterBack:()=>{document.body.style.background=m[o].dataset.theme},onLeaveBack:()=>{0==o&&(document.body.style.background=m[o].dataset.defaultTheme)},onLeave:()=>{o==y.length-1&&(document.body.style.background=m[o].dataset.defaultTheme)}})}),c&&c.resize()}}p.forEach((e,t)=>{e.addEventListener("click",e=>{e.preventDefault(),c&&c.scrollTo(m[t],{offset:50,lock:!0})})}),b(!0),window.addEventListener("resize",()=>b())}