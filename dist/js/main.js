import Popup from"./popup.js";import sliders from"./sliders.js";import splitText from"./split-text.js";import startAnimation from"./start-animation.js";const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),header=document.querySelector(".header"),imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure img");function convertToEmbedded(e){const t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);if(t&&t[1]){const e=document.createElement("iframe");return e.width="560",e.height="315",e.src=`https://www.youtube.com/embed/${t[1]}?autoplay=1`,e.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.setAttribute("allowfullscreen",""),e}return console.error("Неверная ссылка на YouTube видео"),null}imageAspectRatio.forEach(e=>{e.getAttribute("width")&&e.getAttribute("height")&&e.style.setProperty("--aspect-ratio",`${e.getAttribute("width")}/${e.getAttribute("height")}`)}),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("is-mobile-menu-active")});const r=t(".single__video");if(r&&r.dataset.url){r.innerHTML="";const e=convertToEmbedded(r.dataset.url);r.append(e)}}));const popup=new Popup;popup.init();let windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),html.style.setProperty("--vw",.01*window.innerWidth+"px"),html.style.setProperty("--logo-size",Math.round(.01*window.innerWidth*14)+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}resize(),window.addEventListener("resize",resize),sliders(),splitText(),startAnimation();