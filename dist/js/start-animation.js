import scrollAnimation from"./scroll-animation.js";import splitText from"./split-text.js";export default function startAnimation(){let e,t=window.innerWidth-document.body.offsetWidth;document.body.classList.remove("disable-scroll"),document.documentElement.style.setProperty("--scrollbar-width",t+"px"),document.body.classList.add("disable-scroll"),history.scrollRestoration="manual",gsap.registerPlugin(ScrollTrigger),ScrollTrigger.config({ignoreMobileResize:!0});const i=document.querySelector(".header"),o=document.querySelector(".main-background"),n=o.querySelector(".main-background__logo"),s=(o.querySelectorAll(".main-background__logo span"),document.querySelector(".main-background__line")),d=document.querySelector(".about-us__section_title"),l=document.querySelector(".about-us__title"),r=document.querySelectorAll(".about-us__col")[1];splitText(),gsap.set(n,{bottom:window.innerHeight/2-n.offsetHeight/2+"px",left:window.innerWidth>=992?window.innerWidth/2.35+"px":window.innerWidth/2.85+"px",scale:window.innerWidth>=992?.15:.35});let a,c,m=0,u=!1,p=!1,w=!1;function g(e){p||(p=!0,scrollAnimation(e))}function b(t){e.raf(t),requestAnimationFrame(b)}function y(o=!1){m!=window.innerWidth&&(m=window.innerWidth,e&&e.destroy(),window.innerWidth>=992?(new SimpleBar(document.querySelector(".main-container"),{autoHide:!1}),e=new Lenis({wrapper:document.querySelector(".simplebar-content-wrapper"),content:document.querySelector(".simplebar-content")})):e=new Lenis,requestAnimationFrame(b),e.scrollTo(0,{immediate:!0}),e.stop(),m=window.innerWidth,c&&c.kill(),gsap.set(document.documentElement,{"--gradient-animating":"0px","--gradient-size":5*window.innerWidth+"px"}),c=gsap.timeline({repeat:-1}),c.to(document.documentElement,{"--gradient-animating":5*window.innerWidth+"px",duration:12,ease:"none"}),a&&a.kill(),a=gsap.timeline(),a.pause(),gsap.set(n,{bottom:window.innerHeight/2-n.offsetHeight/2+"px",left:window.innerWidth>=992?window.innerWidth/2.35+"px":window.innerWidth/2.85+"px",scale:window.innerWidth>=992?.15:.35,"--logo-opacity":1,"--logo-bg-color":"#DF4D44"}),a.to(n,{bottom:s.offsetHeight/1.5+"px",left:window.innerWidth/15+"px",scale:1,duration:2,ease:"power2.inOut"}),a.to(n,{"--logo-opacity":0,"--gradient-opacity":1,"--logo-bg-color":"#FFF",onComplete:()=>{i.classList.add("is-visible"),s.classList.add("is-visible")}},"-=0.5"),a.to(d,{onComplete:()=>{d.classList.add("is-visible"),l.classList.add("is-visible")}},"-=0.5"),a.to(l.querySelectorAll(".word, .about-us__title_icon"),{opacity:1,duration:1.5,stagger:.08}),a.to(r,{onComplete:()=>{r.classList.add("is-visible"),document.body.classList.remove("disable-scroll"),e&&(e.resize(),e.start())}},"-=1.8"),o?(a.seek(a.endTime()),gsap.set(n,{opacity:1}),d.classList.add("is-visible"),l.classList.add("is-visible"),i.classList.add("is-visible"),i.classList.add("add-blur"),s.classList.add("is-visible"),n.classList.add("is-active-gradient"),r.classList.add("is-visible"),document.body.classList.remove("disable-scroll"),document.body.style.background="#000",e&&(e.resize(),e.start())):a.play(),document.body.classList.contains("disable-scroll")?(document.body.classList.remove("disable-scroll"),t=window.innerWidth-document.body.offsetWidth,document.documentElement.style.setProperty("--scrollbar-width",t+"px"),document.body.classList.add("disable-scroll")):document.documentElement.style.setProperty("--scrollbar-width",t+"px"))}gsap.set(document.documentElement,{"--gradient-animating":"0px","--gradient-size":5*window.innerWidth+"px"}),c=gsap.timeline({repeat:-1}),c.to(document.documentElement,{"--gradient-animating":5*window.innerWidth+"px",duration:12}),a=gsap.timeline(),a.to(n,{opacity:1,duration:2,delay:.5,"--logo-opacity":1,"--logo-bg-color":"#DF4D44",onComplete:()=>{w=!0}}),window.addEventListener("load",()=>{w?(y(),window.addEventListener("resize",()=>y(!0)),setTimeout(()=>{g({lenis:e})},5e3)):(u=!0,setTimeout(()=>{y(),window.addEventListener("resize",()=>y(!0)),g({lenis:e})},2e3))})}